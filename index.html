<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Bloom Finance</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<link rel="icon" type="image/jpg" href="favicon.jpg">
<link rel="stylesheet" href="style.css"/>
</head>
<body>

<header class="site-header">
  <img src="for_header.jpg" alt="Pastel meadow header"/>
  <div class="header-overlay"></div>
  <div class="header-title">
    <h1>Bloom Finance</h1>
    <p>your gentle money companion</p>
  </div>
</header>

<div class="topbar">
  <label class="dark-toggle">
    <span class="switch">
      <input type="checkbox" id="darkToggle"/>
      <span class="slider"></span>
    </span>
    Dark Mode
  </label>
</div>

<div class="app">

  <!-- BALANCE HERO -->
  <div class="balance-hero">
    <div class="balance-main">
      <div class="balance-label">Current Balance</div>
      <div class="balance-amount" id="balance-display">LKR 0.00</div>
    </div>
    <div class="balance-stats">
      <div class="stat-pill">
        <div class="stat-pill-label">Income</div>
        <div class="stat-pill-value" id="total-income">0</div>
      </div>
      <div class="stat-pill">
        <div class="stat-pill-label">Expenses</div>
        <div class="stat-pill-value" id="total-expense">0</div>
      </div>
    </div>
  </div>

  <!-- ROW 1: Add Transaction + Add Goal -->
  <div class="grid-2">
    <div class="card">
      <div class="card-title">
        <span class="icon" style="background:var(--peach-light)">ğŸ’¸</span>
        Add Transaction
      </div>
      <div class="type-selector">
        <button class="type-btn active-income" id="btn-income" onclick="setType('income')">â†‘ Income</button>
        <button class="type-btn" id="btn-expense" onclick="setType('expense')">â†“ Expense</button>
      </div>
      <div class="form-group">
        <label>Description</label>
        <input type="text" id="tx-desc" placeholder="e.g. Freelance payment"/>
      </div>
      <div class="form-group">
        <label>Amount (LKR)</label>
        <input type="number" id="tx-amount" placeholder="0.00" min="0"/>
      </div>
      <div class="form-group">
        <label>Date</label>
        <input type="date" id="tx-date"/>
      </div>
      <button class="btn btn-peach" onclick="addTransaction()">Add Transaction</button>
    </div>

    <div class="card">
      <div class="card-title">
        <span class="icon" style="background:var(--lavender-light)">ğŸŒ±</span>
        New Savings Goal
      </div>
      <div class="form-group">
        <label>Goal Name</label>
        <input type="text" id="goal-desc" placeholder="e.g. New Laptop"/>
      </div>
      <div class="form-group">
        <label>Target Amount (LKR)</label>
        <input type="number" id="goal-target" placeholder="0.00" min="0"/>
      </div>
      <div class="form-group">
        <label>Target Date</label>
        <input type="date" id="goal-date"/>
      </div>
      <button class="btn btn-sage" onclick="addGoal()">Set Goal</button>
    </div>
  </div>

  <!-- ROW 2: Charts -->
  <div class="grid-3">
    <div class="card">
      <div class="card-title">
        <span class="icon" style="background:var(--sky-light)">ğŸ©</span>
        Income vs Expenses
      </div>
      <div class="chart-wrap">
        <canvas id="donutChart"></canvas>
        <div class="donut-center">
          <span class="donut-center-num" id="donut-ratio">â€”</span>
          <span class="donut-center-label">balance ratio</span>
        </div>
      </div>
    </div>

    <div class="card" style="grid-column: span 2;">
      <div class="card-title">
        <span class="icon" style="background:var(--sage-light)">ğŸ“ˆ</span>
        Balance Over Time
      </div>
      <div class="chart-wrap" style="height:180px;">
        <canvas id="lineChart"></canvas>
      </div>
    </div>
  </div>

  <!-- ROW 3: Transactions + Goals + Category Bar -->
  <div class="grid-2">
    <div class="card">
      <div class="card-title">
        <span class="icon" style="background:var(--peach-light)">ğŸ“‹</span>
        Transactions
      </div>
      <div class="tx-list" id="tx-list"></div>
    </div>

    <div class="card">
      <div class="card-title">
        <span class="icon" style="background:var(--lavender-light)">ğŸ¯</span>
        Financial Goals
      </div>
      <div id="goals-list" style="max-height:320px;overflow-y:auto;padding-right:4px;"></div>
    </div>
  </div>

  <!-- ROW 4: Monthly bar chart -->
  <div class="card" style="margin-bottom:20px;">
    <div class="card-title">
      <span class="icon" style="background:var(--peach-light)">ğŸ“Š</span>
      Monthly Summary
    </div>
    <div class="chart-wrap" style="height:200px;">
      <canvas id="barChart"></canvas>
    </div>
  </div>

  <div class="clear-bar">
    <button class="btn-ghost" onclick="clearAll()">ğŸ§¹ Clear All Data</button>
  </div>

</div>

<script src="app.js"></script>
</body>
</html>